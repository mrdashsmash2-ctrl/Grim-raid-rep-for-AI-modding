local function blocking_menu_during_raid()
	if (level.present()) then
		if (alife_storage_manager.get_state().enable_raid_mode == true) then
			if ("l10_radar" ~= alife():level_name(game_graph():vertex(alife():actor().m_game_vertex_id):level_id())) then
				local str = strformat(game.translate_string("st_ui_raid_no_main_menu"),text)
				actor_menu.set_msg(1, str, 4)	
				exec_console_cmd("main_menu off")
				return true
			end
		end
	end
	return false
end


local original_OnButton_load_clicked = ui_main_menu.main_menu.OnButton_load_clicked
function ui_main_menu.main_menu:OnButton_load_clicked()
	if (blocking_menu_during_raid() == true) then return end
	original_OnButton_load_clicked(self)
end

local original_OnButton_last_save = ui_main_menu.main_menu.OnButton_last_save
function ui_main_menu.main_menu:OnButton_last_save()
	if (blocking_menu_during_raid() == true) then return end
	original_OnButton_last_save(self)
end

local original_OnButton_disconnect_clicked = ui_main_menu.main_menu.OnButton_disconnect_clicked
function ui_main_menu.main_menu:OnButton_disconnect_clicked()
	if (blocking_menu_during_raid() == true) then return end
	original_OnButton_disconnect_clicked(self)
end

local original_OnButton_save_clicked = ui_main_menu.main_menu.OnButton_save_clicked
function ui_main_menu.main_menu:OnButton_save_clicked()
	if (blocking_menu_during_raid() == true) then return end
	original_OnButton_save_clicked(self)
end